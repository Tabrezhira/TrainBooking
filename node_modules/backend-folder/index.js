#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

console.log('🚀 Creating backend folder structure...');

// Define the folder structure
const folders = [
  'src',
  'src/config',
  'src/controllers',
  'src/middleware',
  'src/models',
  'src/routes',
  'src/services',
  'src/utils',
  'src/validators',
];

const files = {
  '.env': '',
  '.eslintrc.js': `module.exports = {
    env: { node: true, es6: true },
    extends: 'eslint:recommended',
    parserOptions: { ecmaVersion: 12, sourceType: 'module' },
    rules: { semi: ['error', 'always'], quotes: ['error', 'single'] },
  };`,
  '.prettierrc': `{
    "semi": true,
    "singleQuote": true,
    "trailingComma": "es5",
    "printWidth": 100,
    "tabWidth": 2,
    "useTabs": false,
    "arrowParens": "always",
    "bracketSpacing": true,
    "endOfLine": "lf",
    "jsxSingleQuote": false,
    "quoteProps": "as-needed",
    "proseWrap": "preserve"
  }`,
  'package.json': JSON.stringify(
    {
      name: 'backend-project',
      version: '1.0.0',
      main: 'src/app.js',
      scripts: {
        dev: "nodemon app.js"
       },
       devDependencies: {
        nodemon: "^3.1.9"
      }
    },
    
    null,
    2
  ),
  'README.md': '# Backend Project',
  'src/app.js': `const express = require('express');
const app = express();
app.use(express.json());
app.get('/', (req, res) => res.send('Hello World'));
app.listen(3000, () => console.log('Server running on port 3000'));`,
};

// Function to create directories
function createDirectories() {
  folders.forEach((folder) => {
    if (!fs.existsSync(folder)) {
      fs.mkdirSync(folder, { recursive: true });
      console.log(`📁 Created: ${folder}`);
    }
  });
}

// Function to create files
function createFiles() {
  Object.entries(files).forEach(([filePath, content]) => {
    if (!fs.existsSync(filePath)) {
      fs.writeFileSync(filePath, content);
      console.log(`📝 Created: ${filePath}`);
    }
  });
}

// Execute script
createDirectories();
createFiles();
console.log('✅ Backend folder structure created successfully!');
